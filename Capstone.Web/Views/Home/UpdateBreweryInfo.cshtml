@using Capstone.Web.Models
@*@model HoursViewModel*@
@model Brewery
@{
    int brewID = (int)Session["BreweryId"];
    //int brewID = 1;
}



<style>

    textarea.materialize-textarea:focus:not([readonly]) {
        border-bottom: 1px solid #ff9e3d;
        box-shadow: 0 1px 0 0 #ff9e3d;
    }

    textarea.materialize-textarea:focus:not([readonly]) {
        border-bottom: 1px solid #ff9e3d;
        box-shadow: 0 1px 0 0 #ff9e3d;
    }

    .input-field .prefix.active {
        color: #ff9e3d;
    }

    textarea.materialize-textarea:focus:not([readonly]) + label {
        color: #ff9e3d;
    }



    input:not([type]):focus:not([readonly]),
    input[type=text]:not(.browser-default):focus:not([readonly]),
    input[type=password]:not(.browser-default):focus:not([readonly]),
    input[type=email]:not(.browser-default):focus:not([readonly]),
    input[type=url]:not(.browser-default):focus:not([readonly]),
    input[type=time]:not(.browser-default):focus:not([readonly]),
    input[type=date]:not(.browser-default):focus:not([readonly]),
    input[type=datetime]:not(.browser-default):focus:not([readonly]),
    input[type=datetime-local]:not(.browser-default):focus:not([readonly]),
    input[type=tel]:not(.browser-default):focus:not([readonly]),
    input[type=number]:not(.browser-default):focus:not([readonly]),
    input[type=search]:not(.browser-default):focus:not([readonly]),
    textarea.materialize-textarea:focus:not([readonly]) {
        border-bottom: 1px solid #ff9e3d;
        -webkit-box-shadow: 0 1px 0 0 #ff9e3d;
        box-shadow: 0 1px 0 0 #ff9e3d;
    }

        input:not([type]):focus:not([readonly]) + label,
        input[type=text]:not(.browser-default):focus:not([readonly]) + label,
        input[type=password]:not(.browser-default):focus:not([readonly]) + label,
        input[type=email]:not(.browser-default):focus:not([readonly]) + label,
        input[type=url]:not(.browser-default):focus:not([readonly]) + label,
        input[type=time]:not(.browser-default):focus:not([readonly]) + label,
        input[type=date]:not(.browser-default):focus:not([readonly]) + label,
        input[type=datetime]:not(.browser-default):focus:not([readonly]) + label,
        input[type=datetime-local]:not(.browser-default):focus:not([readonly]) + label,
        input[type=tel]:not(.browser-default):focus:not([readonly]) + label,
        input[type=number]:not(.browser-default):focus:not([readonly]) + label,
        input[type=search]:not(.browser-default):focus:not([readonly]) + label,
        textarea.materialize-textarea:focus:not([readonly]) + label {
            color: #ff9e3d;
        }


    .hours {
        width: 115px;
        margin: 0px 10px;
        border-radius: 7px;
    }

    .labelmargin {
        margin-left: 58px !important
    }

    ::placeholder { /* Chrome, Firefox, Opera, Safari 10.1+ */
        color: #000000;
        opacity: 1; /* Firefox */
    }

    :-ms-input-placeholder { /* Internet Explorer 10-11 */
        color: #000000;
    }

    ::-ms-input-placeholder { /* Microsoft Edge */
        color: #000000;
    }
</style>


<div class="jumbotron w-75 pt-4 mx-auto mt-5 px-0">

    <h4 id="breweryName" class="center-align mb-1 mt-0 ">Update Brewery Info</h4>


    @using (Html.BeginForm("Process", "Home", FormMethod.Post, new { id = "photoSubmit", enctype = "multipart/form-data" }))
    {

        <div class="row justify-content-center">

            <div class="pr-4">
                <div class="file-field input-field mx-auto w-75">
                    <div class="btn">
                        <span>File</span>
                        <input type="file" name="photo">
                    </div>
                    <div class="file-path-wrapper">
                        <input class="file-path validate" style="width: 306px;" placeholder="Upload Brewery Image Here" type="text">
                    </div>
                </div>
            </div>
            <div class="pt-4">
                <label class="z-depth-3" id="checkpop">
                    <input id="profilePic" type="checkbox" value="true" name="profPIC" />
                    <span>Main Display Picture?</span>
                </label>
            </div>
        </div>

        <input hidden name="picbrewID" value="@brewID" />

        <div class="row my-0">
            <div class="row col s12">
                <div class="input-field col s6">
                    <i class="material-icons prefix">mode_edit</i>
                    @Html.TextAreaFor(m => m.History, new { id = "hist", name = "history", @class = "materialize-textarea" })
                    <label id="hist" for="hist">Brewery History</label>
                </div>
            </div>
        </div>
        <div class="row my-0">
            <div class="row col s12">
                <div class="input-field col s6">
                    <i class="fas fa-map-marker-alt prefix"></i>
                    <textarea id="address" name="address" class="materialize-textarea"></textarea>
                    <label id="add" for="address">Brewery Adress</label>
                </div>
            </div>
        </div>

        <div class="row mb-0">
            <div class="row col">
                <div class="input-field col-md">
                    <i class="material-icons prefix">account_circle</i>
                    <input id="contName" type="text" name="cname" class="validate">
                    <label id="labName" class="labelmargin" for="contName">Contact Name</label>
                </div>
                <div class="input-field col-md">
                    <i class="material-icons prefix">phone</i>
                    <input id="tely" type="tel" name="phone" class="validate">
                    <label id="labTely" class="labelmargin" for="tely">Contact Phone</label>
                </div>
                <div class="input-field col-md">
                    <i class="material-icons prefix">email</i>
                    <input id="cEmail" type="email" name="email" class="validate">
                    <label id="labEmail" class="labelmargin" for="cEmail">Contact Email</label>
                    <input hidden name="brewID" value="@brewID" />
                </div>
            </div>
        </div>

        <h5 class="mb-4 mt-0 center-align">Hours Of Operation</h5>
        <div class="justify-content-center mx-auto row w-100">

            <div class="hours z-depth-3 mb-4 mb-lg-4 mb-lx-1">
                <div class="input-field col">
                    <input name="open0" type="text" id="o0" />
                    <label id="lo0" for="o0">Mon Open</label>
                </div>
                <div class="input-field col">
                    <input name="close0" type="text" id="c0" />
                    <label id="lc0" for="c0">Mon Close</label>
                    <div class="switch">
                        <label>
                            <small>Closed</small>
                            <input id="check0" type="checkbox">
                            <span class="lever mx-0"></span>
                            <small>Open</small>
                        </label>
                    </div>
                </div>
            </div>

            <div class="hours z-depth-3 mb-4 mb-lg-4 mb-lx-1">
                <div class="input-field col">
                    <input name="open1" type="text" id="o1" />
                    <label id="lo1" for="o1">Tues Open</label>
                </div>
                <div class="input-field col">
                    <input name="close1" type="text" id="c1" />
                    <label id="lc1" for="c1">Tues Close</label>
                    <div class="switch">
                        <label>
                            <small>Closed</small>
                            <input id="check1" type="checkbox">
                            <span class="lever mx-0"></span>
                            <small>Open</small>
                        </label>
                    </div>
                </div>
            </div>

            <div class="hours z-depth-3 mb-4 mb-lg-4 mb-lx-1">
                <div class="input-field col">
                    <input name="open2" type="text" id="o2" />
                    <label id="lo2" for="o2">Wed Open</label>
                </div>
                <div class="input-field col">
                    <input name="close2" type="text" id="c2" />
                    <label id="lc2" for="c2">Wed Close</label>
                    <div class="switch">
                        <label>
                            <small>Closed</small>
                            <input id="check2" type="checkbox">
                            <span class="lever mx-0"></span>
                            <small>Open</small>
                        </label>
                    </div>
                </div>
            </div>

            <div class="hours z-depth-3 mb-4 mb-lg-4 mb-lx-1">
                <div class="input-field col">
                    <input name="open3" type="text" id="o3" />
                    <label id="lo3" for="o3">Thur Open</label>
                </div>
                <div class="input-field col">
                    <input name="close3" type="text" id="c3" />
                    <label id="lc3" for="c3">Thur Close</label>
                    <div class="switch">
                        <label>
                            <small>Closed</small>
                            <input id="check3" type="checkbox">
                            <span class="lever mx-0"></span>
                            <small>Open</small>
                        </label>
                    </div>
                </div>
            </div>

            <div class="hours z-depth-3 mb-4 mb-lg-4 mb-lx-1">
                <div class="input-field col">
                    <input name="open4" type="text" id="o4" />
                    <label id="lo4" for="o4">Fri Open</label>
                </div>
                <div class="input-field col">
                    <input name="close4" type="text" id="c4" />
                    <label id="lc4" for="c4">Fri Close</label>
                    <div class="switch">
                        <label>
                            <small>Closed</small>
                            <input id="check4" type="checkbox">
                            <span class="lever mx-0"></span>
                            <small>Open</small>
                        </label>
                    </div>
                </div>
            </div>

            <div class="hours z-depth-3 mb-4 mb-lg-4 mb-lx-1">
                <div class="input-field col">
                    <input name="open5" type="text" id="o5" />
                    <label id="lo5" for="o5">Sat Open</label>
                </div>
                <div class="input-field col">
                    <input name="close5" type="text" id="c5" />
                    <label id="lc5" for="c5">Sat Close</label>
                    <div class="switch">
                        <label>
                            <small>Closed</small>
                            <input id="check5" type="checkbox">
                            <span class="lever mx-0"></span>
                            <small>Open</small>
                        </label>
                    </div>
                </div>
            </div>

            <div class="hours z-depth-3 mb-4 mb-lg-4 mb-lx-1">
                <div class="input-field col">
                    <input name="open6" type="text" id="o6" />
                    <label id="lo6" for="o6">Sun Open</label>
                </div>
                <div class="input-field col">
                    <input name="close6" type="text" id="c6" />
                    <label id="lc6" for="c6">Sun Close</label>
                    <div class="switch">
                        <label>
                            <small>Closed</small>
                            <input id="check6" type="checkbox">
                            <span class="lever mx-0"></span>
                            <small>Open</small>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <button id="newbrewsubmit" type="submit" class="btn btn-block btn-outline-success mroonbtn btn-lg w-75 mx-auto">Update</button>
    }

</div>




<style>
    .redclosed {
        color: red !important;
    }

    .greenopen {
        color: rgb(0, 219, 1);
    }

    #checkpop {
        border-radius: 21px;
        padding: 6px 16px;
    }
</style>



<script>

    $("#profilePic").prop("checked",true)

    $(function () {
        $.ajax({
            url: "/Home/GetCurrentBrewry?brewID=" + @brewID,
            method: "GET",
            dataType: "json"
        }).done(function (results) {
            console.log(results)
            //$("#hist").val(results.History);    $("label#hist").addClass("active")
            $("#address").val(results.Address); $("label#add").addClass("active")
            $("#contName").val(results.ContactName); $("label#labName").addClass("active")
            $("#tely").val(results.ContactPhone); $("label#labTely").addClass("active")
            $("#cEmail").val(results.ContactEmail); $("label#labEmail").addClass("active")
            $("#breweryName").text(`Update ${results.BreweryName} Info`)

        })

    })


    $(function () {

        $.ajax({
            url: "/Home/Gethours?brewID=" + @brewID,
            method: "GET",
            dataType: "json"
        }).done(function (results) {
            console.log(results)

            $("#o0").val(results[0].Opens); $("label#lo0").addClass("active")
            $("#o1").val(results[1].Opens); $("label#lo1").addClass("active")
            $("#o2").val(results[2].Opens); $("label#lo2").addClass("active")
            $("#o3").val(results[3].Opens); $("label#lo3").addClass("active")
            $("#o4").val(results[4].Opens); $("label#lo4").addClass("active")
            $("#o5").val(results[5].Opens); $("label#lo5").addClass("active")
            $("#o6").val(results[6].Opens); $("label#lo6").addClass("active")

            $("#c0").val(results[0].Closes); $("label#lc0").addClass("active")
            $("#c1").val(results[1].Closes); $("label#lc1").addClass("active")
            $("#c2").val(results[2].Closes); $("label#lc2").addClass("active")
            $("#c3").val(results[3].Closes); $("label#lc3").addClass("active")
            $("#c4").val(results[4].Closes); $("label#lc4").addClass("active")
            $("#c5").val(results[5].Closes); $("label#lc5").addClass("active")
            $("#c6").val(results[6].Closes); $("label#lc6").addClass("active")

            })


    })



    $(function () {

        setTimeout(function () {

        for (var i = 0; i < 7; i++) {

            if ($(`#o${i}`).val() != "CLOSED" && $(`#c${i}`).val() != "CLOSED") {

            /*$(`#lo${i}`).text(`Mon Open`); *//* $(`#o${i}`).val(``);*/ $(`#lo${i}`).removeClass(`active`); $(`#lo${i}`).removeClass(`redclosed`); $(`#o${i}`).prop(`disabled`, false);
           /* $(`#lc${i}`).text(`Mon Close`);*/  /*$(`#c${i}`).val(``);*/ $(`#lc${i}`).removeClass(`active`); $(`#lc${i}`).removeClass(`redclosed`); $(`#c${i}`).prop(`disabled`, false);
            $(`#check${i}`).prop("checked", true);
            //$(`#o${i}`).val(results[i].Opens);
            //$(`#c${i}`).val(results[i].Closes);
            $(`label#lo${i}`).addClass("active")
            $(`label#lc${i}`).addClass("active")
            }



            if ($(`#o${i}`).val() === "CLOSED") {

                console.log("test" + i)

                $(`#o${i}`).val("");
                $(`#c${i}`).val("");
                $(`#lo${i}`).removeClass(`active`);
                $(`#lo${i}`).addClass(`redclosed`);
                $(`#lo${i}`).text(`CLOSED`);
                $(`#o${i}`).prop(`disabled`, true);
                $(`#lc${i}`).removeClass(`active`);
                $(`#lc${i}`).addClass(`redclosed`);
                $(`#lc${i}`).text(`CLOSED`);
                $(`#c${i}`).prop(`disabled`, true);
                $(`#o${i}`).prop(`disabled`, true);

                $(`#check${i}`).prop("checked", false);
            }

        }

        },800)


    })




        $("#check0").click(function () {

            //$    OPEN
            if ($("#check0").is(":checked")) {
                $("#lo0").text("Mon Open"); $("#o0").val(""); $("#lo0").removeClass("active"); $("#lo0").removeClass("redclosed"); $("#o0").prop("disabled", false);
                $("#lc0").text("Mon Close"); $("#c0").val(""); $("#lc0").removeClass("active"); $("#lc0").removeClass("redclosed"); $("#c0").prop("disabled", false);
            }
            //X    CLOSED
            if (!$("#check0").is(":checked")) {
                $("#lo0").removeClass("active"); $("#lo0").addClass("redclosed"); $("#lo0").text("CLOSED"); $("#o0").val(""); $("#o0").prop("disabled", true);
                $("#lc0").removeClass("active"); $("#lc0").addClass("redclosed"); $("#lc0").text("CLOSED"); $("#c0").val(""); $("#c0").prop("disabled", true);
            }
        })


        $("#check1").click(function (event) {

            //$    OPEN
            if ($("#check1").is(":checked")) {
                $("#lo1").text("Tue Open"); $("#lo1").removeClass("active"); $("#lo1").removeClass("redclosed"); $("#o1").prop("disabled", false);
                $("#lc1").text("Tue Close"); $("#lc1").removeClass("active"); $("#lc1").removeClass("redclosed"); $("#c1").prop("disabled", false);
            }
            //X    CLOSED
            if (!$("#check1").is(":checked")) {
                $("#lo1").removeClass("active"); $("#lo1").addClass("redclosed"); $("#lo1").text("CLOSED"); $("#o1").val(""); $("#o1").prop("disabled", true);
                $("#lc1").removeClass("active"); $("#lc1").addClass("redclosed"); $("#lc1").text("CLOSED"); $("#c1").val(""); $("#c1").prop("disabled", true);
            }
        })

        $("#check2").click(function (event) {

            //$    OPEN
            if ($("#check2").is(":checked")) {
                $("#lo2").text("Wed Open"); $("#lo2").removeClass("active"); $("#lo2").removeClass("redclosed"); $("#o2").prop("disabled", false);
                $("#lc2").text("Wed Close"); $("#lc2").removeClass("active"); $("#lc2").removeClass("redclosed"); $("#c2").prop("disabled", false);
            }
            //X    CLOSED
            if (!$("#check2").is(":checked")) {
                $("#lo2").removeClass("active"); $("#lo2").addClass("redclosed"); $("#lo2").text("CLOSED"); $("#o2").val(""); $("#o2").prop("disabled", true);
                $("#lc2").removeClass("active"); $("#lc2").addClass("redclosed"); $("#lc2").text("CLOSED"); $("#c2").val(""); $("#c2").prop("disabled", true);
            }
        })

        $("#check3").click(function (event) {

            //$    OPEN
            if ($("#check3").is(":checked")) {
                $("#lo3").text("Thur Open"); $("#lo3").removeClass("active"); $("#lo3").removeClass("redclosed"); $("#o3").prop("disabled", false);
                $("#lc3").text("Thur Close"); $("#lc3").removeClass("active"); $("#lc3").removeClass("redclosed"); $("#c3").prop("disabled", false);
            }
            //X    CLOSED
            if (!$("#check3").is(":checked")) {
                $("#lo3").removeClass("active"); $("#lo3").addClass("redclosed"); $("#lo3").text("CLOSED"); $("#o3").val(""); $("#o3").prop("disabled", true);
                $("#lc3").removeClass("active"); $("#lc3").addClass("redclosed"); $("#lc3").text("CLOSED"); $("#c3").val(""); $("#c3").prop("disabled", true);
            }
        })

        $("#check4").click(function (event) {

            //$    OPEN
            if ($("#check4").is(":checked")) {
                $("#lo4").text("Fri Open"); $("#lo4").removeClass("active"); $("#lo4").removeClass("redclosed"); $("#o4").prop("disabled", false);
                $("#lc4").text("Fri Close"); $("#lc4").removeClass("active"); $("#lc4").removeClass("redclosed"); $("#c4").prop("disabled", false);
            }
            //X    CLOSED
            if (!$("#check4").is(":checked")) {
                $("#lo4").removeClass("active"); $("#lo4").addClass("redclosed"); $("#lo4").text("CLOSED"); $("#o4").val(""); $("#o4").prop("disabled", true);
                $("#lc4").removeClass("active"); $("#lc4").addClass("redclosed"); $("#lc4").text("CLOSED"); $("#c4").val(""); $("#c4").prop("disabled", true);
            }
        })



        $("#check5").click(function (event) {

            //$    OPEN
            if ($("#check5").is(":checked")) {
                $("#lo5").text("Sat Open"); $("#lo5").removeClass("active"); $("#lo5").removeClass("redclosed"); $("#o5").prop("disabled", false);
                $("#lc5").text("Sat Close"); $("#lc5").removeClass("active"); $("#lc5").removeClass("redclosed"); $("#c5").prop("disabled", false);
            }
            //X    CLOSED
            if (!$("#check5").is(":checked")) {
                $("#lo5").removeClass("active"); $("#lo5").addClass("redclosed"); $("#lo5").text("CLOSED"); $("#o5").val(""); $("#o5").prop("disabled", true);
                $("#lc5").removeClass("active"); $("#lc5").addClass("redclosed"); $("#lc5").text("CLOSED"); $("#c5").val(""); $("#c5").prop("disabled", true);
            }
        })


        $("#check6").click(function (event) {

            //$    OPEN
            if ($("#check6").is(":checked")) {
                $("#lo6").text("Sun Open"); $("#lo6").removeClass("active"); $("#lo6").removeClass("redclosed"); $("#o6").prop("disabled", false);
                $("#lc6").text("Sun Close"); $("#lc6").removeClass("active"); $("#lc6").removeClass("redclosed"); $("#c6").prop("disabled", false);
            }
            //X    CLOSED
            if (!$("#check6").is(":checked")) {
                $("#lo6").removeClass("active"); $("#lo6").addClass("redclosed"); $("#lo6").text("CLOSED"); $("#o6").val(""); $("#o6").prop("disabled", true);
                $("#lc6").removeClass("active"); $("#lc6").addClass("redclosed"); $("#lc6").text("CLOSED"); $("#c6").val(""); $("#c6").prop("disabled", true);
            }
        })





</script>

